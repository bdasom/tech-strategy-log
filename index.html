<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tech/Service Strategy Log — Dasom</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="theme-color" content="#111827" />
  <meta name="description" content="Local-first archive for daily tech/service strategy notes with Google Drive sync + AI feedback." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🗂️</text></svg>">
  <style>
    .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,0.06); }
    .prose-like p { margin: 0.25rem 0; }
    .prose-like pre { white-space: pre-wrap; }
    .tag { display:inline-block; padding:0.2rem 0.5rem; font-size:0.75rem; border-radius:9999px; border:1px solid #374151; }
    .rte { min-height: 140px; outline: none; }
    .rte a { text-decoration: underline; }
    .thumb { width: 84px; height: 84px; object-fit: cover; border-radius: 0.75rem; border: 1px solid #374151; }
    .toolbar button, .toolbar select, .toolbar input[type="color"] { border-radius: 0.75rem; border:1px solid #374151; padding: 0.35rem 0.6rem; font-size: 0.85rem; background: #0b1220; }
    .toolbar button:hover, .toolbar select:hover { background:#111827; }
    .toolbar .split { width:1px; height:28px; background:#1f2937; display:inline-block; margin:0 6px; }
  </style>
</head>
<body class="min-h-screen bg-gray-950 text-gray-100">
  <header class="sticky top-0 z-20 border-b border-gray-800 bg-gray-950/80 glass">
    <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-2xl">🗂️</span>
        <div>
          <h1 class="text-xl font-semibold">Tech/Service Strategy Log</h1>
          <p class="text-xs text-gray-400">Local-first · Google Drive sync · Rich editor · AI feedback</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <a href="#" id="exportMd" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Export .md</a>
        <a href="#" id="exportJson" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Export .json</a>
        <a href="#" id="exportCsv" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Export .csv</a>
        <label class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800 cursor-pointer">
          Import JSON
          <input type="file" id="importJson" accept="application/json" class="hidden">
        </label>
        <button id="googleSignIn" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Google 로그인</button>
        <button id="googleSignOut" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800 hidden">로그아웃</button>
        <button id="driveSync" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Drive에서 불러오기</button>
        <button id="driveBackup" class="px-3 py-1.5 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Drive에 백업</button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-6">
    <!-- Prompt of the Day -->
    <section class="mb-6">
      <div class="rounded-2xl border border-gray-800 bg-gray-900 p-4">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <div class="text-xs uppercase tracking-wide text-gray-400">Prompt of the Day</div>
            <div id="potd" class="mt-1 text-lg font-medium"></div>
            <div id="potdMeta" class="text-xs text-gray-400"></div>
          </div>
          <div class="flex items-center gap-2">
            <button id="quickOneLiner" class="px-3 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-sm">+ One-line quick note</button>
            <button id="askFeedback" class="px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">AI Feedback (draft)</button>
            <button id="darkToggle" class="px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">🌗</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Tabs -->
    <section class="mb-6">
      <div class="flex gap-2">
        <button class="tab-btn px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800" data-tab="capture">Capture</button>
        <button class="tab-btn px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800" data-tab="archive">Archive</button>
        <span class="text-xs text-gray-400 ml-2">Tip: 작게라도 써보자. 오늘은 한 문장만 남겨도 돼요.</span>
      </div>
    </section>

    <!-- Capture form -->
    <section id="tab-capture" class="rounded-2xl border border-gray-800 bg-gray-900 p-4">
      <form id="entryForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm text-gray-300 mb-1">Date</label>
          <input id="date" type="date" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" />
        </div>
        <div>
          <label class="block text-sm text-gray-300 mb-1">Language</label>
          <select id="lang" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2">
            <option value="KR">한국어</option>
            <option value="EN">English</option>
          </select>
        </div>
        <div>
          <label class="block text-sm text-gray-300 mb-1">Category</label>
          <select id="category" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2">
            <option>Company</option><option>Service</option><option>Technology</option><option>Trend</option><option>Other</option>
          </select>
        </div>
        <div>
          <label class="block text-sm text-gray-300 mb-1">Industry</label>
          <select id="industry" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2">
            <option>IT</option><option>Mobility</option><option>Healthcare</option><option>Media/Content</option><option>Greentech</option><option>Fintech</option><option>Other</option>
          </select>
        </div>

        <!-- Rich text toolbar + editor -->
        <div class="md:col-span-2">
          <div class="toolbar mb-2 flex flex-wrap items-center gap-2">
            <!-- basics -->
            <button type="button" class="rte-btn" data-cmd="bold"><b>B</b></button>
            <button type="button" class="rte-btn italic" data-cmd="italic">I</button>
            <button type="button" class="rte-btn" data-cmd="insertUnorderedList">• List</button>
            <button type="button" class="rte-btn" data-cmd="insertOrderedList">1. List</button>
            <span class="split"></span>
            <!-- headings / blocks -->
            <button type="button" class="rte-btn" data-cmd="formatBlock" data-value="H1">H1</button>
            <button type="button" class="rte-btn" data-cmd="formatBlock" data-value="H2">H2</button>
            <button type="button" class="rte-btn" data-cmd="formatBlock" data-value="BLOCKQUOTE">❝</button>
            <button type="button" class="rte-btn" data-cmd="formatBlock" data-value="PRE">Code</button>
            <span class="split"></span>
            <!-- font family -->
            <select id="rteFont" title="Font family">
              <option value="" selected>Font</option>
              <option value="system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, sans-serif">System</option>
              <option value="Noto Sans KR, Apple SD Gothic Neo, Malgun Gothic, sans-serif">Noto Sans KR</option>
              <option value="Inter, Roboto, Helvetica Neue, Arial, sans-serif">Inter</option>
              <option value="Georgia, Cambria, Times New Roman, serif">Serif</option>
              <option value="ui-monospace, SFMono-Regular, Menlo, Consolas, monospace">Monospace</option>
            </select>
            <!-- font size -->
            <select id="rteSize" title="Font size">
              <option value="">Size</option>
              <option value="12">12px</option><option value="14">14px</option><option value="16">16px</option>
              <option value="18">18px</option><option value="20">20px</option><option value="24">24px</option>
              <option value="28">28px</option><option value="32">32px</option>
            </select>
            <span class="split"></span>
            <!-- colors -->
            <label class="text-xs text-gray-400">A
              <input id="rteColor" type="color" value="#e5e7eb" />
            </label>
            <label class="text-xs text-gray-400">HL
              <input id="rteHighlight" type="color" value="#3b82f6" />
            </label>
            <button type="button" id="rteClear" title="Clear formatting">Clear</button>
            <span class="split"></span>
            <button type="button" id="rteLink">Link</button>
            <button type="button" id="rteImg">+ Image</button>
            <button type="button" id="rteVideo">+ Video</button>
            <input type="file" id="mediaFile" accept="image/*,video/*" class="hidden">
          </div>
          <label class="block text-sm text-gray-300 mb-1">Rich note (서식/미디어 가능)</label>
          <div id="rich" class="rte w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" contenteditable="true" spellcheck="false"></div>
        </div>

        <!-- Lightweight fields -->
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-300 mb-1">[오늘 읽은 것 / What I read]</label>
          <textarea id="read" rows="2" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2"></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-300 mb-1">[떠오른 아이디어 / Idea]</label>
          <textarea id="idea" rows="2" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2"></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-300 mb-1">[연결된 흐름 / Flow]</label>
          <textarea id="flow" rows="2" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2"></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-300 mb-1">One-liner (핵심 한 줄)</label>
          <input id="one" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" placeholder="한 줄 요약" />
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-300 mb-1">Tags (comma-separated)</label>
          <input id="tags" class="w-full bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" placeholder="ai, subscription, cross-border" />
        </div>
        <div class="md:col-span-2 flex items-center justify-between gap-3">
          <div class="text-xs text-gray-400">저장 시 자동 Drive 백업(로그인 상태) · 로그인 시 자동 복원</div>
          <div class="flex gap-2">
            <button type="reset" class="px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Reset</button>
            <button type="submit" class="px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-sm font-semibold">Save</button>
          </div>
        </div>
      </form>
    </section>

    <!-- Archive -->
    <section id="tab-archive" class="hidden rounded-2xl border border-gray-800 bg-gray-900 p-4">
      <div class="flex flex-wrap items-end gap-3 mb-4">
        <div>
          <label class="block text-xs text-gray-400 mb-1">Search</label>
          <input id="q" class="bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" placeholder="keyword" />
        </div>
        <div>
          <label class="block text-xs text-gray-400 mb-1">Category</label>
          <select id="fCategory" class="bg-gray-950 border border-gray-800 rounded-xl px-3 py-2">
            <option value="">All</option><option>Company</option><option>Service</option><option>Technology</option><option>Trend</option><option>Other</option>
          </select>
        </div>
        <div>
          <label class="block text-xs text-gray-400 mb-1">Industry</label>
          <select id="fIndustry" class="bg-gray-950 border border-gray-800 rounded-xl px-3 py-2">
            <option value="">All</option><option>IT</option><option>Mobility</option><option>Healthcare</option><option>Media/Content</option><option>Greentech</option><option>Fintech</option><option>Other</option>
          </select>
        </div>
        <div>
          <label class="block text-xs text-gray-400 mb-1">From</label>
          <input id="from" type="date" class="bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" />
        </div>
        <div>
          <label class="block text-xs text-gray-400 mb-1">To</label>
          <input id="to" type="date" class="bg-gray-950 border border-gray-800 rounded-xl px-3 py-2" />
        </div>
        <button id="clearFilters" class="px-3 py-2 rounded-xl border border-gray-700 text-sm hover:bg-gray-800">Clear</button>
      </div>
      <div id="stats" class="mb-3 text-xs text-gray-400"></div>
      <div id="list" class="grid grid-cols-1 gap-3"></div>
    </section>
  </main>

  <footer class="mx-auto max-w-6xl px-4 py-10 text-center text-xs text-gray-500">
    Built for Dasom · Local-first archive + Google Drive sync + AI feedback.
  </footer>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="app.js"></script>
</body>
</html>
